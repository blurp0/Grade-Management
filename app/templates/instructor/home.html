<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Instructor Home Â· Grade Management{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/instructor.css') }}" />
    <!-- Include in base.html or layout -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</head>
<body>
  <nav>
    <a href="{{ url_for('main.instructor') }}" class="{% if request.endpoint == 'main.home' %}active{% endif %}">Home</a>
    <a href="{{ url_for('main.record_assessments') }}" class="{% if request.endpoint == 'main.home' %}active{% endif %}">Grade</a>
    <a href="{{ url_for('main.instructor_students') }}" class="{% if active == 'students' %}active{% endif %}">Students</a>
    <a href="{{ url_for('main.instructor_profile') }}" class="{% if active == 'profile' %}active{% endif %}">Profile</a>
    <a href="{{ url_for('main.logout') }}" class="logout-link">Logout</a>
  </nav>

  <main>
  {% block content %}
  <div class="container mt-4">
    <h1 class="mb-4">Instructor Dashboard</h1>  <!-- Added label/title -->

    <div class="row g-4">
      <div class="col-md-6">
        <div class="card text-white bg-success h-100">
          <div class="card-body d-flex flex-column justify-content-center align-items-center">
            <h5 class="card-title">Graded Students</h5>
            <p class="display-4 mb-0">{{ graded_student_count or 0 }}</p>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="card text-white bg-warning h-100">
          <div class="card-body d-flex flex-column justify-content-center align-items-center">
            <h5 class="card-title">Pending Students</h5>
            <p class="display-4 mb-0">{{ incomplete_student_count or 0 }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endblock %}

  </main>

{% with messages = get_flashed_messages(with_categories=True) %}
  {% if messages %}
    <div class="modal fade" id="flashModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
      <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body text-center">
            {% for category, msg in messages %}
              <div class="alert alert-{{ 'danger' if category == 'error' else category }} mb-0" role="alert">
                {{ msg }}
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  {% endif %}
{% endwith %}


<script>
  document.addEventListener('DOMContentLoaded', function () {
    var flashModal = document.getElementById('flashModal');
    if (flashModal) {
      var modal = new bootstrap.Modal(flashModal);
      modal.show();

      // Auto close after 3 seconds
      setTimeout(function() {
        modal.hide();
      }, 3000);
    }
  });
</script>
</body>
</html>
